<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

    <script src="geo_points.js"></script>
    <script src="roots.js"></script>

    <style>
        #map { width: 100%; height: 100vh; }
    </style>


</head>

<body>
    <div id="map"></div>

    <button onclick="location.href='./upload.html'" type="button" id="refreshButton">
        Upload
    </button>

    <!-- <button id="refreshButton">
        Upload
    </button>

    <button id="refreshButton">
        Upload
    </button> -->
    
    <script>
        var map = L.map('map').setView([51.505, -0.09], 3);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // NUSC
        L.geoJSON(pts_nusc, {
            onEachFeature: function(feature, layer){
                layer.bindPopup('<video width=1000% controls autoplay><source src="' + vid_root_nusc + feature.properties.scene + '.mp4' + '"></source></video>');
                layer.on('mouseclick', function(e){
                    this.openPopup()
                })
            }
        }).addTo(map);
        
        // KITTI
        L.geoJSON(pts_kitti, {
            onEachFeature: function(feature, layer){
                layer.bindPopup('<video width=1000% controls autoplay><source src="' + vid_root_kitti + feature.properties.scene + '.mp4' + '"></source></video>');
                layer.on('mouseclick', function(e){
                    this.openPopup()
                })
            }
        }).addTo(map);


        // WEB
        L.geoJSON(pts_web, {
            onEachFeature: function(feature, layer){
                layer.bindPopup('<iframe width="280" height="160" src="' + feature.properties.src + '?autoplay=1&mute=1' + '"></iframe>');
                layer.on('mouseclick', function(e){
                    this.openPopup()
                })
            }
        }).addTo(map);

    </script>

</body>
</html>